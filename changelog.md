# 3.5.4

1.  [bug fix]修复生成pdf时, 图片生成失败导致程序整体退出的问题

# 3.5.3

1.  [bug fix]修复生成的pdf中, 文章内容错位/丢失问题

# 3.5.2

1.  [bug fix]修复 mac 下打开后白屏问题

# 3.5.1

1.  [bug fix]增加 pdf 首页长度, 避免被吞文本 
2.  [bug fix]仅实际发生微博详情抓取时, 才需要休眠 1s


# 3.5.0

> 感谢博主 [@二级市场捡辣鸡冠军](https://weibo.com/u/7519797263) 的无私分享. 作者受博主感召, 爬起来更新了这版代码 

1.  建立失败重抓机制, 并通过数据库记录失败任务, 支持针对失败页面进行重抓
2.  解决pdf模糊问题. 
    1.  之前按照屏幕宽750px进行截图, 但实际上现代显示器物理像素一般是逻辑像素x2甚至x4水平, 导致750px图片被放大两倍后, 显得模糊
    2.  解决方案是在渲染截图时, 按750 x 放大比率进行截图, 目前比率为2倍, 也就是截取2倍图, 实测可以满足分辨率需要
3.  阅读体验问题
    1.  显式增加推荐阅读器提示
4.  开发调试优化
    1.  增加配置项, 允许关闭自动生成配置能力
    2.  增加配置项, 支持只重抓错误记录
    3.  所有请求一律自动重试5次
    4.  运行完毕后默认进行重试
    5.  显式提示抓取错误解决方案: 重新登录或者等待6小时后重试
    6.  sqlite3 依赖调整为 better-sqlite3

# 3.4.0

1.  修复无法访问微博接口的bug, 恢复软件功能
2.  简单技术优化
    1.  优化导出的文件名. 默认选取数据库中已收录的当前用户微博起止时间
    2.  将api接口改为通过jsdeliver托管
    3.  将所有前端中的node调用迁移至electron中
    4.  升级antd/umijs/electron至当前最新版
    5.  全局移除moment, 替换为dayjs

# 3.3.7

1.  解决 github 上 无法打包 mac 版代码的问题, 优化最终产物包代码体积(移除了 moment 和 sourcemap)
2.  添加`打开调试面板按钮`, 如果点击获取验证码后没反应, 可以使用调试面板上的`检查元素`按键, 一点就可以输入验证码了
3.  fix issue https://github.com/YaoZeyuan/stablog/issues/115 , 规避 mblog.pic 不能被枚举的问题

# 3.3.0

2.  修复获取微博总数失效问题
3.  添加注销登录按钮, 方便切换账号
4.  切换更新检测域名为自有域名, 方便管理

# 3.2.0

1.  修复 mac 上无法渲染 pdf 的问题
    1.  mac 加载本地网页时必须加`file://`前缀
    2.  对高分屏用户, 截取出的图片是正常分辨率 n 倍, 需手工对原图进行一次还原
2.  将单卷微博总量降低到 5000, 避免 pdf 生成失败
3.  限制图片最大高度为 30000px, 网页长度超过 30000 则拆分为多张图片, 避免由于网页过长导致渲染失败

# 3.1.0

1.  修复无法识别形如`https://weibo.com/world2049`类主页地址的问题
2.  修复备份范围无效的问题
3.  管理页面
    1.  添加数据导入/导出功能
    2.  解决点选用户后无法高亮的 bug
4.  添加硬限制, 每卷电子书最多只能容纳 10000 条微博, 超过 10000 条后强制分卷, 避免输出 pdf 时`长时间`卡死
5.  重写使用说明

# 3.0.0

1.  移除打赏二维码, 软件今后作为纯工具/公益软件发布
2.  恢复输入 url 备份指定博主功能
3.  参照另一款微博备份工具[Octoman](https://chrome.google.com/webstore/detail/octoman%E5%BE%AE%E5%8D%9A%E5%A4%87%E4%BB%BD/pojodomdlpobompicdllljgiomnfpmho?hl=zh-CN) 重写页面样式, 和微博 m 站样式对齐
    1.  为备份的用户加上了微博会员 logo
4.  增加分卷配置, 允许按年/月拆分输出的微博电子书.(例如, 按年导出用户微博)
5.  使用 Electron 自身将微博渲染图片, 并输出为 pdf, 而不是过去采用的 puppeteer 方案
    1.  部分用户无法安装 puppeteer, 导致 pdf 输出失败
    2.  puppeteer 也是对 Chrome 浏览器的封装, 导致项目体积巨大(300mb). 下载成本高, 不便于推广
6.  将 pdf 输出库调整为[jsPDF](https://github.com/MrRio/jsPDF), 从而支持
    1.  在输出的 pdf 中, 添加日期维度的目录, 方便跳转
    2.  支持按文本搜索 pdf 内容
7.  pdf 封面字体调整为[阿里巴巴普惠体](https://ics.alibaba.com/project/Hn8mXx)
8.  使用 mozjpeg-js 对图片进行压缩, 输出 pdf 的体积减小 80%以上.
9.  在输出的 html 中, 添加`上一页`/`下一页`/`目录`按钮, 方便浏览
10. 修复不能备份微博文章的 bug
11. 调整输出模板, 在输出用户转发的微博视频时, 增加对视频封面图的展示
12. 允许只输出原创微博/微博文章
13. 前端界面改为基于 React 构建(umi 方案).
14. 只支持 64 位平台, 不再提供对 32 位系统的支持

# 2.0.0

1.  移除输入 url 的功能, 只允许备份已登录账号的微博(规避法律风险)
2.  支持跳过抓取流程, 直接输出电子书
3.  支持跳过 pdf 输出阶段
4.  使用微博风格界面, 和微博 m 站样式保持一致
5.  添加使用 Tip

# 1.9.0

1.  解决 windows 平台下无法输出 pdf 的问题

# 1.8.0

1.  解决首页地址为(weibo.com/xxxxxxxxx)形式的被封号用户同步用户信息不成功问题
2.  解决部分用户出现的, 由于网络不稳定, 抓取进程 crash 后引发的抓取不全问题
3.  支持配置 pdf 输出质量
4.  支持 32 位操作系统
5.  每次输出电子书前, 不会再删除之前输出的其他内容

# 1.7.1

感谢[@一橘 Tangerine](https://weibo.com/u/3704028532) & [@放牛归来再读书](https://www.weibo.com/u/2136367523) 两位博主的推荐

感谢 [@阳光-投资 A](https://www.weibo.com/u/6857118784) 反馈的问题

1.  Electron 构建出的 32 & 64 复合包无法在 32 位系统上安装, 因此, 将 windows 打包目标系统换成 32 位系统. 方便使用

# 1.7.0

1.  解决用户未登录问题. 现在账号被封的微博 id 也能通过稳部落备份微博记录了(感谢知乎网友@孙老师 的帮助)
2.  添加打开电子书所在目录按钮, 方便用户找到电子书所在位置
3.  微博备份的截至日期默认值修改成始终为当前日期的下一天, 方便用户使用

# 1.6.0

1.  解决 mac 上不能生成 pdf 文件问题

# 1.5.0

2.  数据管理界面增加重选按钮

# 1.4.0

1.  修复微博排序异常错误
2.  调整 pdf 首页 url 地址为 https://www.yaozeyuan.online/stablog

# 1.3.0

1.  解决无法抓取最后一页微博的 bug
2.  解决用户微博总数获取异常的 bug
3.  TS 版本升级至 3.7.3

# 1.2.0

1.  支持浏览已备份微博数据
2.  解决微博排序异常问题
3.  解决无法展示微博文章问题
4.  日志记录超过 10w 行, 自动清空
